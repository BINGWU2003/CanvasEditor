# NOTE

## 数据结构
数据结构的设计，类似于`DeltaSet`，最终呈现的数据结构形式是扁平化的，但是在`Core`中需要设计`State`来管理树形结构，因为要设计`Undo/Redo`的功能，在不全量存储快照的情况下就意味着必须设计原子化的`Op`，因为想实现的功能有组合这个能力，所以最终实现的形式实际上是树形的结构，而我希望的结构是扁平化的，因为树形结构查找起来比较费劲，需要实现的`Op`类型也会变多，我希望能尽量减少`Op`的类型并且能够做到`History`，所以最终定下的数据结构是`DeltaSet`作为存储，通过`State`来管理整个编辑器状态。

## History
原子化的`Op`已经设计好了，所以在设计`History`模块时就不需要全量保存快照了，但是如果每个操作都需要并入`History Stack`的话可能并不是很好，通常都是有`N`个`Op`的一并`Undo/Redo`，所以这个模块应该有一个定时器，如果在`N`毫秒秒内没有新的`Op`加入的话就将`Op`并入`History Stack`，但是当时我在思考一个问题，如果这`N`毫秒内用户进行了`Undo`操作应该怎么办，后来想想实际上很简单，此时只需要清除定时器，将暂存的`Op[]`立即放置于`Redo Stack`即可。
